const inpSearch=document.getElementById("inp-search"),btnSearch=document.getElementById("btn-search"),weatherContent=document.querySelector(".weather-content"),weatherCard=document.querySelector(".weather-card"),btnLeft=document.querySelector(".weather-card__btn-left"),btnLocation=document.querySelector(".btn-location"),background=document.querySelector(".background");let URL="https://api.weatherapi.com/v1/current.json?key=c30ea8f295484f37b6d85901232308&q=";function currentWeather(){let e;e=2===arguments.length?URL+arguments[0]+","+arguments[1]:URL.concat(arguments[0]),fetch(e).then((e=>{if(e.ok)return e.json();throw new Error("error fetching data")})).then((e=>{document.querySelector(".notification").setAttribute("class","notification"),document.querySelector(".weather-card__location-text").innerText=e.location.name,document.querySelector(".weather-card__weather-img").src=e.current.condition.icon,document.querySelector(".weather-card__weather-text").innerText=e.current.condition.text,document.querySelector(".weather-card__degrees-text").innerText=e.current.temp_c+" C",document.querySelector(".weather-card__feels-degrees").innerText=e.current.feelslike_c+" C",document.querySelector(".weather-card__humidity-percent").innerText=e.current.humidity+"%",background.src="images/background-card.webp",weatherContent.classList.toggle("weather-content--off"),weatherCard.classList.toggle("weather-card--off")})).catch((e=>{document.querySelector(".notification span").innerText=e,document.querySelector(".notification").setAttribute("class","notification error")}))}btnSearch.addEventListener("click",(()=>{btnSearch.disabled=!0;const e=inpSearch.value;inpSearch.value="",document.querySelector(".notification span").innerText="Loading...",document.querySelector(".notification").setAttribute("class","notification loading"),currentWeather(e),setTimeout((()=>{btnSearch.disabled=!1}),1500)})),btnLeft.addEventListener("click",(()=>{weatherContent.classList.toggle("weather-content--off"),weatherCard.classList.toggle("weather-card--off"),background.src="images/background.webp"})),btnLocation.addEventListener("click",(()=>{document.querySelector(".notification span").innerText="Loading...",document.querySelector(".notification").setAttribute("class","notification loading"),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{currentWeather(e.coords.latitude,e.coords.longitude)}),(e=>{document.querySelector(".notification span").innerText="User denied geolocation",document.querySelector(".notification").setAttribute("class","notification error")})):(document.querySelector(".notification span").innerText="Geolocation is not supported by your browser",document.querySelector(".notification").setAttribute("class","notification error"))}));